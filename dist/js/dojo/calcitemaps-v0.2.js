/* calcite-maps - v0.0.1 - 2016-06-15
*  https://github.com/alaframboise/calcite-maps#readme
*  Copyright (c) 2016 Environmental Systems Research Institute, Inc.
*  Apache 2.0 License */
define(["dojo/_base/declare","dojo/_base/lang","dojo/query","dojo/dom-class","dojo/on","dojo/domReady!"],function(declare,lang,query,domClass,on){var CalciteMaps=declare(null,{constructor:function(){this._setNavbarEvents(),this._setPanelEvents(),this._setTouchEvents()},navbarSelector:".calcite-navbar .calcite-dropdown li > a",autoCollapsePanel:!0,preventOverscrolling:!0,_breakpoint:768,_setNavbarEvents:function(){var funcContext=function(e){if(e.currentTarget.dataset.target){var panelBody,panels,panel=query(e.currentTarget.dataset.target);panel&&panel.length>0&&domClass.contains(panel[0],"panel")&&(domClass.contains(panel[0],"in")?panel.removeClass("in"):(panels=query(panel).parent().query(".panel.in"),panels.collapse("hide"),query(panels).query(".panel-collapse").collapse("hide")),panel.collapse("show"),panelBody=query(panel).query(".panel-collapse"),domClass.contains(panelBody[0],"in")||query(panelBody[0]).collapse("show"))}};query(this.navbarSelector).on("click",lang.hitch(this,funcContext)),query(".calcite-dropdown").on("show.bs.dropdown",function(){query(".calcite-dropdown-toggle").addClass("open")}),query(".calcite-dropdown").on("hide.bs.dropdown",function(){query(".calcite-dropdown-toggle").removeClass("open")}),query("#calciteToggleNavbar").on("click",function(){domClass.contains(query("body")[0],"calcite-nav-hidden")?query("body").removeClass("calcite-nav-hidden"):query("body").addClass("calcite-nav-hidden")})},_setPanelEvents:function(){this.autoCollapsePanel&&(query(".calcite-panels .panel .panel-collapse").on("hidden.bs.collapse",function(e){query(e.target.parentNode).query(".panel-label, .panel-close").addClass("visible-xs-inline-block")}),query(".calcite-panels .panel .panel-collapse").on("show.bs.collapse",function(e){query(e.target.parentNode).query(".panel-label, .panel-close").removeClass("visible-xs-inline-block")}))},_setTouchEvents:function(){var funcContext=function(e){this.preventOverscrolling&&e.target instanceof SVGSVGElement&&e.preventDefault()};query(".calcite-map").on("touchmove",lang.hitch(this,funcContext))}});return new CalciteMaps});